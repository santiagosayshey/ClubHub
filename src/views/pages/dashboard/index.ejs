<div class="container mt-4">
    <div class="row">

		<div class="col-sm-3">
			<h3 class="text-left mt-3">Your Clubs</h3>
			<div class="list-group mt-3">
				<% if (clubDetails.length > 0) { %>
					<% for (let i = 0; i < clubDetails.length; i++) { %>
						<a href="/club/<%= clubDetails[i].club_id %>" class="list-group-item list-group-item-action d-flex align-items-center flex-gap" >
							<img src="/static/images/uploads/<%= clubDetails[i].club_logo %>" class="rounded-3" alt="Club Logo" style="height: 20px; width: 20px;" onerror="this.src='/static/images/default_avatar.png';">
							<span><%= clubDetails[i].club_name %></span>
						</a>
					<% } %>
				<% } else { %>
					<div class="list-group-item">
						<p class="mb-0">You are not a member of any club yet.</p>
					</div>
				<% } %>
			</div>
			<h3 class="text-left mt-3">Club Directory</h3>
			<div class="list-group mt-3">
				<a href="/directory" class="list-group-item list-group-item-action">
					All Clubs
				</a>
			</div>
			<% if (user.role == 'Admin') { %>
				<div class="list-group">
					<h3 class="text-left mt-3">Admin Tools</h3>
					<a href="/manage" class="list-group-item list-group-item-action rounded-top">
						Manage Users
					</a>
				</div>
			<% } %>
		</div>

		<div class="col-sm-6">
			<h3 class="text-left mt-3">Recent Updates</h3>
			<% if (updateDetails.length > 0) { %>
				<% for (let i = 0; i < updateDetails.length; i++) { %>
					<div class="card bg-light mt-2 update-content mb-4">
						<div class="card-body d-flex flex-column">
							<div class="d-flex justify-content-between align-items-start">
								<div>
									<h5>
										<strong class="card-title"><%= updateDetails[i].update_title %></strong>
									</h5>
									<a href="/club/<%= updateDetails[i].club_id %>" class="list-group-item list-group-item-action club-link">
										<small class="card-subtitle mb-2 text-muted">
											<i class="bi bi-house-fill"></i> <%= updateDetails[i].club_name %>
										</small>
									</a>
								</div>
								<small class="text-muted mb-2 ">
									<span style="margin-right:10px;"><i class="bi bi-person-fill "></i> Posted by: <a href="/account/<%= updateDetails[i].user_id %>" class="club-link text-muted"><%= updateDetails[i].first_name %> <%= updateDetails[i].last_name %></a></span>
									<span><i class="bi bi-clock-fill"></i> <%= updateDetails[i].timeStatement %></span>
								</small>
							</div>
							<p class="card-text mt-2">
								<%- updateDetails[i].update_content %>
							</p>
						</div>
					</div>
				<% } %>
			<% } else { %>
				<div class="alert alert-info mt-3 text-center">No Update available</div>
			<% } %>
		</div>

		<div class="col-sm-3">
			<h3 class="text-left mt-3">Upcoming Events</h3>
			<div class="list-group mt-3">
				<% if (eventDetails.length> 0) { %>
					<% for (let i=0; i < eventDetails.length; i++) { %>
						<a href="/events/<%= eventDetails[i].event_id %>" class="list-group-item list-group-item-action">
							<span class="float-end"><%= eventDetails[i].isAttending ? '⭐' : '' %></span>
							<div>
								<%= eventDetails[i].event_name %>
							</div>
							<div>
								<%= eventDetails[i].formattedDate %>
								-
								<%= eventDetails[i].event_time %>
							</div>

						</a>
					<% } %>
				<% } else { %>
					<div class="card-body list-group-item ">
						<h5 class="card-title">No upcoming events</h5>
					</div>
				<% } %>
			</div>
		</div>


    </div>
</div>

